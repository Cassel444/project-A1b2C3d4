{"version":3,"file":"commonHelpers.js","sources":["../src/js/covers.js"],"sourcesContent":["const section = document.getElementById('covers-section');\nconst imageList = section.querySelector('.cover-list');\nimageList.style.display = 'none';\n\nfunction getRandomIndices(limit, count) {\n  let indices = new Set();\n  while (indices.size < count) {\n    indices.add(Math.floor(Math.random() * limit));\n  }\n  return Array.from(indices);\n}\n\nfunction createGallery() {\n  const imageElements = section.querySelectorAll('.cover-list-item');\n  const galleryWrapper = document.createElement('div');\n  galleryWrapper.className = 'gallery-wrapper';\n\n  const galleryBox = document.createElement('div');\n  galleryBox.className = 'gallery-box';\n\n  const gallery = document.createElement('div');\n  gallery.id = 'gallery';\n\n  const rows = [];\n\n  for (let i = 0; i < 5; i++) {\n    const row = document.createElement('div');\n    row.className = 'gallery-row';\n    const randomIndices = getRandomIndices(imageElements.length, 9);\n\n    randomIndices.forEach(index => {\n      const imageClone = imageElements[index].cloneNode(true);\n      row.appendChild(imageClone);\n    });\n\n    rows.push(row);\n    gallery.appendChild(row);\n  }\n\n  rows.forEach(row => {\n    row.classList.add('animate-right');\n  });\n\n  galleryBox.appendChild(gallery);\n  galleryWrapper.appendChild(galleryBox);\n  section.appendChild(galleryWrapper);\n\n  function isElementInViewport(el) {\n    const rect = el.getBoundingClientRect();\n    return (\n      rect.top >= 0 &&\n      rect.left >= 0 &&\n      rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n      rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n    );\n  }\n\n  function checkVisibilityAndAnimate() {\n    if (isElementInViewport(section)) {\n      animate();\n    }\n  }\n\n  checkVisibilityAndAnimate();\n\n  window.addEventListener('scroll', checkVisibilityAndAnimate);\n\n  function animate() {\n    rows.forEach(row => {\n      row.style.animationPlayState = 'running';\n      row.addEventListener('animationend', () => {\n        row.style.animationPlayState = 'paused';\n        row.style.transform = 'translateX(0)';\n        const firstItem = row.querySelector('.cover-list-item:first-child');\n        if (firstItem.offsetLeft + firstItem.offsetWidth < 0) {\n          row.appendChild(firstItem.cloneNode(true));\n          row.removeChild(firstItem);\n        }\n      });\n    });\n  }\n}\n\ncreateGallery();\n"],"names":["section","imageList","getRandomIndices","limit","count","indices","createGallery","imageElements","galleryWrapper","galleryBox","gallery","rows","i","row","index","imageClone","isElementInViewport","el","rect","checkVisibilityAndAnimate","animate","firstItem"],"mappings":"ssBAAA,MAAMA,EAAU,SAAS,eAAe,gBAAgB,EAClDC,EAAYD,EAAQ,cAAc,aAAa,EACrDC,EAAU,MAAM,QAAU,OAE1B,SAASC,EAAiBC,EAAOC,EAAO,CACtC,IAAIC,EAAU,IAAI,IAClB,KAAOA,EAAQ,KAAOD,GACpBC,EAAQ,IAAI,KAAK,MAAM,KAAK,OAAQ,EAAGF,CAAK,CAAC,EAE/C,OAAO,MAAM,KAAKE,CAAO,CAC3B,CAEA,SAASC,GAAgB,CACvB,MAAMC,EAAgBP,EAAQ,iBAAiB,kBAAkB,EAC3DQ,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAY,kBAE3B,MAAMC,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,UAAY,cAEvB,MAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,GAAK,UAEb,MAAMC,EAAO,CAAA,EAEb,QAASC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,MAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,UAAY,cACMX,EAAiBK,EAAc,OAAQ,CAAC,EAEhD,QAAQO,GAAS,CAC7B,MAAMC,EAAaR,EAAcO,CAAK,EAAE,UAAU,EAAI,EACtDD,EAAI,YAAYE,CAAU,CAChC,CAAK,EAEDJ,EAAK,KAAKE,CAAG,EACbH,EAAQ,YAAYG,CAAG,CACxB,CAEDF,EAAK,QAAQE,GAAO,CAClBA,EAAI,UAAU,IAAI,eAAe,CACrC,CAAG,EAEDJ,EAAW,YAAYC,CAAO,EAC9BF,EAAe,YAAYC,CAAU,EACrCT,EAAQ,YAAYQ,CAAc,EAElC,SAASQ,EAAoBC,EAAI,CAC/B,MAAMC,EAAOD,EAAG,wBAChB,OACEC,EAAK,KAAO,GACZA,EAAK,MAAQ,GACbA,EAAK,SAAW,OAAO,aAAe,SAAS,gBAAgB,eAC/DA,EAAK,QAAU,OAAO,YAAc,SAAS,gBAAgB,YAEhE,CAED,SAASC,GAA4B,CAC/BH,EAAoBhB,CAAO,GAC7BoB,GAEH,CAEDD,IAEA,OAAO,iBAAiB,SAAUA,CAAyB,EAE3D,SAASC,GAAU,CACjBT,EAAK,QAAQE,GAAO,CAClBA,EAAI,MAAM,mBAAqB,UAC/BA,EAAI,iBAAiB,eAAgB,IAAM,CACzCA,EAAI,MAAM,mBAAqB,SAC/BA,EAAI,MAAM,UAAY,gBACtB,MAAMQ,EAAYR,EAAI,cAAc,8BAA8B,EAC9DQ,EAAU,WAAaA,EAAU,YAAc,IACjDR,EAAI,YAAYQ,EAAU,UAAU,EAAI,CAAC,EACzCR,EAAI,YAAYQ,CAAS,EAEnC,CAAO,CACP,CAAK,CACF,CACH,CAEAf,EAAe"}